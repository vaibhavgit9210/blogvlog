<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - BlogVlog</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'><text y='14' font-size='14'>üìù</text></svg>">
</head>
<body>
    <div class="container">
        <header>
            <h1>BlogVlog</h1>
            <p>A retro blogging experience</p>
            <nav>
                <a href="index.html">Home</a>
                <a href="admin.html">Admin</a>
            </nav>
        </header>

        <!-- Admin Status Bar -->
        <div class="admin-status">
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span class="status-text">Not connected</span>
            </div>
            <button id="logout-btn" class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.5rem;">Logout</button>
        </div>

        <!-- Editor Section (hidden until authenticated) -->
        <section id="editor-section" class="hidden">
            <form id="post-form">
                <div class="form-group">
                    <label for="post-title">Title (optional)</label>
                    <input type="text" id="post-title" placeholder="Enter post title...">
                </div>

                <div class="form-group">
                    <label for="post-content">Content *</label>
                    <textarea id="post-content" placeholder="Write your post..." required></textarea>
                </div>

                <div class="form-group">
                    <label>Media (drag & drop or click)</label>
                    <div id="drop-zone" class="drop-zone">
                        <div class="drop-icon">üìÅ</div>
                        <p>Drop images, videos, or audio here</p>
                        <p style="font-size: 0.4rem; margin-top: 0.5rem;">Max 37 MB per file</p>
                    </div>
                    <input type="file" id="file-input" multiple accept="image/*,video/*,audio/*" style="display: none;">
                    <div id="media-preview" class="media-preview"></div>
                </div>

                <!-- Progress Bar (hidden by default) -->
                <div id="progress-container" class="hidden">
                    <div class="progress-bar">
                        <div id="progress-bar" class="progress-bar-fill" style="width: 0%"></div>
                    </div>
                    <p id="progress-text" style="font-family: var(--font-pixel); font-size: 0.5rem; text-align: center; margin-top: 0.5rem;">
                        Preparing...
                    </p>
                </div>

                <button type="submit" id="submit-btn" class="btn" style="width: 100%; margin-top: 1rem;">
                    Publish Post
                </button>
            </form>
        </section>
    </div>

    <!-- Token Modal -->
    <div id="token-modal" class="modal">
        <div class="modal-content">
            <h2>GitHub Authentication</h2>
            <form id="token-form">
                <div class="form-group">
                    <label for="token-input">Personal Access Token</label>
                    <input type="password" id="token-input" placeholder="ghp_xxxxxxxxxxxx" required>
                    <p style="font-size: 0.7rem; color: var(--text-secondary); margin-top: 0.5rem;">
                        Create a token at GitHub ‚Üí Settings ‚Üí Developer settings ‚Üí Personal access tokens.
                        Required scope: <strong>repo</strong>
                    </p>
                </div>
                <p id="token-error" style="color: var(--accent-red); font-family: var(--font-pixel); font-size: 0.5rem; margin-bottom: 1rem;"></p>
                <button type="submit" id="token-submit" class="btn" style="width: 100%;">Connect</button>
            </form>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/github-api.js"></script>
    <script src="js/admin.js"></script>
</body>
</html>
